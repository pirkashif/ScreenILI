# Fonts & Text Rendering

`screenILI` supports two font systems:

1. Built-in **8×8 bitmap font**
2. **XglcdFont** for custom bitmap fonts (X-GLCD C format)

This document explains how both work and when to use each.

---

## Built-in 8×8 Font

The built-in font is always available and requires no extra files.

### Characteristics

- Fixed size: **8×8 pixels**
- Monospace
- Very fast
- Supports rotation (`0`, `90`, `180`, `270`)
- ASCII only

### Usage

```python
display.text8x8(
    x=10,
    y=10,
    text="Hello",
    color=color565(255, 255, 255),
    background=0,
    rotate=0,
)
````

### When to use

* Debug output
* Status text
* Labels
* Anything performance-critical

---

## XglcdFont (Custom Fonts)

For larger, stylized, or proportional fonts, `screenILI` uses **XglcdFont**.

### What is X-GLCD?

X-GLCD is a bitmap font format generated by:

> **MikroElektronika GLCD Font Creator**

Fonts are exported as **C source files** containing hexadecimal bitmap data.

These files are **not executed as C** — they are parsed as text by `xglcd_font.py`.

---

## Font Files

Font files live under:

```text
assets/fonts/
```

Example:

```text
assets/fonts/ArcadePix9x11.c
```

The file must:

* Be plain text
* Contain hex values starting with `0x`
* Use X-GLCD “C” export format

All comments and non-hex lines are ignored by the loader.

---

## Creating a Font

1. Open **GLCD Font Creator**
2. Design or import a font
3. Set font size (e.g. `9 × 11`)
4. Export as:

   * **X-GLCD**
   * **C format**
5. Save as `.c`
6. Copy into `assets/fonts/`

---

## Loading a Font

```python
from xglcd_font import XglcdFont

font = XglcdFont(
    path="/assets/fonts/ArcadePix9x11.c",
    width=9,
    height=11,
    start_letter=32,
    letter_count=96,
)
```

### Parameters

| Parameter      | Meaning                                  |
| -------------- | ---------------------------------------- |
| `path`         | Path to `.c` font file                   |
| `width`        | **Maximum** glyph width in pixels        |
| `height`       | Glyph height in pixels                   |
| `start_letter` | ASCII code of first glyph (usually `32`) |
| `letter_count` | Number of glyphs (usually `96`)          |

> The **actual width of each character** is stored in the font data itself.

---

## Drawing Text with XglcdFont

```python
display.text(
    x=10,
    y=50,
    text="Arcade!",
    font=font,
    color=color565(0, 255, 0),
    background=color565(0, 0, 0),
    landscape=False,
    spacing=1,
)
```

### Orientation

* `landscape=False` → portrait layout
* `landscape=True` → rotated glyph rendering

This is **independent** of display rotation.

---

## Measuring Text

You can measure text width before drawing:

```python
width_px = font.measure_text("Hello", spacing=1)
```

Useful for:

* Centering text
* UI layout
* Right-aligned labels

---

## Performance Notes

* XglcdFont is slower than 8×8 text
* Large fonts allocate more buffers
* Avoid frequent redraws in tight loops
* Prefer pre-rendered UI elements where possible

---

## Common Pitfalls

### Font does not render

* Wrong `width` or `height`
* Incorrect `start_letter`
* Font file not in X-GLCD C format

### Characters missing

* `letter_count` too small
* Font does not include that glyph

### Text clipped or misaligned

* Incorrect font height
* Wrong spacing
* Drawing near screen edges

---

## Example

See:

* [`examples/02_text_and_fonts/main.py`](../examples/02_text_and_fonts/main.py)

---

## Summary

| Use case      | Font      |
| ------------- | --------- |
| Debug / logs  | 8×8       |
| UI labels     | 8×8       |
| Stylized text | XglcdFont |
| Large headers | XglcdFont |